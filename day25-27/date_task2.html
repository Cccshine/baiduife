<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<select id="year-select">
	    <option value="2000">2000</option>
	    <option value="2001">2001</option>
	    <option value="2002">2002</option>
	    <option value="2003">2003</option>
	    <option value="2004">2004</option>
	    <option value="2005">2005</option>
	    <option value="2006">2006</option>
	    <option value="2007">2007</option>
	    <option value="2008">2008</option>
	    <option value="2009">2009</option>
	    <option value="2010">2010</option>
	    <option value="2011">2011</option>
	    <option value="2012">2012</option>
	    <option value="2013">2013</option>
	    <option value="2014">2014</option>
	    <option value="2015">2015</option>
	    <option value="2016">2016</option>
	    <option value="2017">2017</option>
	    <option value="2018">2018</option>
	    <option value="2019">2019</option>
	    <option value="2020">2020</option>
	    <option value="2021">2021</option>
	    <option value="2022">2022</option>
	    <option value="2023">2023</option>
	    <option value="2024">2024</option>
	    <option value="2025">2025</option>
	    <option value="2026">2026</option>
	    <option value="2027">2027</option>
	    <option value="2028">2028</option>
	    <option value="2029">2029</option>
	    <option value="2030">2030</option>
	</select>

	<select id="month-select">
	    <option value="1">1</option>
	    <option value="2">2</option>
	    <option value="3">3</option>
	    <option value="4">4</option>
	    <option value="5">5</option>
	    <option value="6">6</option>
	    <option value="7">7</option>
	    <option value="8">8</option>
	    <option value="9">9</option>
	    <option value="10">10</option>
	    <option value="11">11</option>
	    <option value="12">12</option>
	</select>

	<select id="day-select">
	</select>

	<select id="hour-select">
	    <option value="0">00</option>
		<option value="1">01</option>
		<option value="2">02</option>
		<option value="3">03</option>
		<option value="4">04</option>
		<option value="5">05</option>
		<option value="6">06</option>
		<option value="7">07</option>
		<option value="8">08</option>
		<option value="9">09</option>
		<option value="10">10</option>
		<option value="11">11</option>
		<option value="12">12</option>
		<option value="13">13</option>
		<option value="14">14</option>
		<option value="15">15</option>
		<option value="16">16</option>
		<option value="17">17</option>
		<option value="18">18</option>
		<option value="19">19</option>
		<option value="20">20</option>
		<option value="21">21</option>
		<option value="22">22</option>
		<option value="23">23</option>
	</select>

	<select id="minute-select">
	    <option value="0">0</option>
	    <option value="1">1</option>
	    <option value="2">2</option>
	    <option value="3">3</option>
	    <option value="4">4</option>
	    <option value="5">5</option>
	    <option value="6">6</option>
	    <option value="7">7</option>
	    <option value="8">8</option>
	    <option value="9">9</option>
	    <option value="10">10</option>
	    <option value="11">11</option>
	    <option value="12">12</option>
	    <option value="13">13</option>
	    <option value="14">14</option>
	    <option value="15">15</option>
	    <option value="16">16</option>
	    <option value="17">17</option>
	    <option value="18">18</option>
	    <option value="19">19</option>
	    <option value="20">20</option>
	    <option value="21">21</option>
	    <option value="22">22</option>
	    <option value="23">23</option>
	    <option value="24">24</option>
	    <option value="25">25</option>
	    <option value="26">26</option>
	    <option value="27">27</option>
	    <option value="28">28</option>
	    <option value="29">29</option>
	    <option value="30">30</option>
	    <option value="31">31</option>
	    <option value="32">32</option>
	    <option value="33">33</option>
	    <option value="34">34</option>
	    <option value="35">35</option>
	    <option value="36">36</option>
	    <option value="37">37</option>
	    <option value="38">38</option>
	    <option value="39">39</option>
	    <option value="40">40</option>
	    <option value="41">41</option>
	    <option value="42">42</option>
	    <option value="43">43</option>
	    <option value="44">44</option>
	    <option value="45">45</option>
	    <option value="46">46</option>
	    <option value="47">47</option>
	    <option value="48">48</option>
	    <option value="49">49</option>
	    <option value="50">50</option>
	    <option value="51">51</option>
	    <option value="52">52</option>
	    <option value="53">53</option>
	    <option value="54">54</option>
	    <option value="55">55</option>
	    <option value="56">56</option>
	    <option value="57">57</option>
	    <option value="58">58</option>
	    <option value="59">59</option>
	</select>

	<select id="second-select">
	    <option value="0">0</option>
	    <option value="1">1</option>
	    <option value="2">2</option>
	    <option value="3">3</option>
	    <option value="4">4</option>
	    <option value="5">5</option>
	    <option value="6">6</option>
	    <option value="7">7</option>
	    <option value="8">8</option>
	    <option value="9">9</option>
	    <option value="10">10</option>
	    <option value="11">11</option>
	    <option value="12">12</option>
	    <option value="13">13</option>
	    <option value="14">14</option>
	    <option value="15">15</option>
	    <option value="16">16</option>
	    <option value="17">17</option>
	    <option value="18">18</option>
	    <option value="19">19</option>
	    <option value="20">20</option>
	    <option value="21">21</option>
	    <option value="22">22</option>
	    <option value="23">23</option>
	    <option value="24">24</option>
	    <option value="25">25</option>
	    <option value="26">26</option>
	    <option value="27">27</option>
	    <option value="28">28</option>
	    <option value="29">29</option>
	    <option value="30">30</option>
	    <option value="31">31</option>
	    <option value="32">32</option>
	    <option value="33">33</option>
	    <option value="34">34</option>
	    <option value="35">35</option>
	    <option value="36">36</option>
	    <option value="37">37</option>
	    <option value="38">38</option>
	    <option value="39">39</option>
	    <option value="40">40</option>
	    <option value="41">41</option>
	    <option value="42">42</option>
	    <option value="43">43</option>
	    <option value="44">44</option>
	    <option value="45">45</option>
	    <option value="46">46</option>
	    <option value="47">47</option>
	    <option value="48">48</option>
	    <option value="49">49</option>
	    <option value="50">50</option>
	    <option value="51">51</option>
	    <option value="52">52</option>
	    <option value="53">53</option>
	    <option value="54">54</option>
	    <option value="55">55</option>
	    <option value="56">56</option>
	    <option value="57">57</option>
	    <option value="58">58</option>
	    <option value="59">59</option>
	</select>

	<p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>
	<script type="text/javascript">

		var yearSelect = document.getElementById("year-select");
		var monthSelect = document.getElementById("month-select");
		var daySelect = document.getElementById("day-select");
		var hourSelect = document.getElementById("hour-select");
		var minuteSelect = document.getElementById("minute-select");
		var secondSelect = document.getElementById("second-select");
		var result = document.getElementById("result-wrapper");

		var now = new Date();
		var nowSplitObj = getSplitTime(now);
		createDaySelectHtml(nowSplitObj.year,nowSplitObj.month);

		yearSelect.value = nowSplitObj.year;
		monthSelect.value = nowSplitObj.month;
		daySelect.value = nowSplitObj.day;
		hourSelect.value = nowSplitObj.hour;
		minuteSelect.value = nowSplitObj.minute;
		secondSelect.value = nowSplitObj.second;
		getResultDesc(now);

		yearSelect.addEventListener('change', function(event){
			createDaySelectHtml(+yearSelect.value, +monthSelect.value);

			var targetTime = getTargetTime();
			getResultDesc(targetTime);
		}, false);

		monthSelect.addEventListener('change', function(event){
			createDaySelectHtml(+yearSelect.value, +monthSelect.value);
			var targetTime = getTargetTime();
			getResultDesc(targetTime);
		}, false);

		daySelect.addEventListener('change', function(event){
			var targetTime = getTargetTime();
			getResultDesc(targetTime);
		}, false);

		hourSelect.addEventListener('change', function(event){
			var targetTime = getTargetTime();
			getResultDesc(targetTime);
		}, false);

		minuteSelect.addEventListener('change', function(event){
			var targetTime = getTargetTime();
			getResultDesc(targetTime);
		}, false);

		secondSelect.addEventListener('change', function(event){
			var targetTime = getTargetTime();
			getResultDesc(targetTime);
		}, false);

		function getResultDesc(target){
			var targetSplitObj = getSplitTime(target);
			var offsetObj = getOffset(target,new Date());
			var str = '现在距离 '
					+ targetSplitObj.year + '年' + toTwo(targetSplitObj.month) + '月' + toTwo(targetSplitObj.day) + '日' + getDayDesc(target)
					+ ' ' + toTwo(targetSplitObj.hour) + ':' + toTwo(targetSplitObj.minute) + ':' + toTwo(targetSplitObj.second)
					+ ' ' + (isPast(target) ? '已经过去' : '还有')
					+ ' ' + offsetObj.day + '天' + toTwo(offsetObj.hour) + '小时' + toTwo(offsetObj.minute) + '分' + toTwo(offsetObj.second) + '秒';
			result.innerHTML = str;
		}

		function getOffset(time1,time2){
			var offset = Math.abs(time1 - time2)/1000;
			return{
				day : Math.floor(offset/3600/24),
				hour : Math.floor(offset/3600%24),
				minute : Math.floor(offset/60%60),
				second : Math.floor(offset%60)
			}
		}

		function getSplitTime(time){
			return {
				year : time.getFullYear(),
				month : time.getMonth() + 1,
				day : time.getDate(),
				weekday : time.getDay(),
				hour : time.getHours(),
				minute : time.getMinutes(),
				second : time.getSeconds()
			}
		}

		function getTargetTime(){
			var time = new Date();
			time.setFullYear(yearSelect.value, monthSelect.value - 1, daySelect.value);
			time.setHours(hourSelect.value, minuteSelect.value, secondSelect.value);
			return time; 
		}

		function isPast(time){
			var now = new Date();
			return now > time;
		}

		function isLeapYear (year) {
			return ((!(year%4) && !!(year%100)) || (!(year%100) && !(year%400)));
		}

		function getMonthDays(year,month){
			if(month === 2){
				return isLeapYear(year) ? 29 : 28;
			}else if(month === 4 || month === 6 || month === 9 || month === 11){
				return 30;
			}else{
				return 31;
			}
		}

		function createDaySelectHtml(year,month){
			var days = getMonthDays(year,month);
			var html = '';
			for(var i = 1;i < days + 1;i++){
				html += '<option value="'+ i +'">'+ i +'</option>';
			}
			daySelect.innerHTML = html;
		}

		function getDayDesc (time,lang) {
			var day = time.getDay();
			switch (day) {
		 		case 1:
			 		return lang === "en" ? "Monday":"星期一";
			 		break;
		 		case 2:
			 		return lang === "en" ? "Tuesday":"星期二"
			 		break;
		 		case 3:
			 		return lang === "en" ? "Wednesday":"星期三"
			 		break;
		 		case 4:
			 		return lang === "en" ? "Thursday":"星期四"
			 		break;
		 		case 5:
			 		return lang === "en" ? "Firday":"星期五"
			 		break;
		 		case 6:
			 		return lang === "en" ? "Staturday":"星期六"
			 		break;
			 	default:
			 		return lang === "en" ? "Sunday":"星期日"
			 		break;
			 } 
		}

		function toTwo(num){
			return num < 10 ? ('0' + num) : num;
		}
	</script>
</body>
</html>